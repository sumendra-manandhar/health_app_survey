(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{77611:function(e,t,s){Promise.resolve().then(s.bind(s,29351))},29351:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var r=s(57437),a=s(2265),n=s(66070),l=s(62869),i=s(95186),c=s(53647),d=s(41312),o=s(94508);let x=d.fC,h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});h.displayName=d.aV.displayName;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});u.displayName=d.xz.displayName;let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});m.displayName=d.VY.displayName;var f=s(35974),g=s(73578),j=s(47625),p=s(86810),b=s(10062),v=s(20407),N=s(77719),y=s(77031),S=s(56940),w=s(97059),_=s(2027),R=s(40626),O=s(21156),C=s(58925),E=s(95805),I=s(66927),Y=s(41671),k=s(76865),A=s(70525),Z=s(73247),L=s(92735),T=s(27648),K=s(42224);function D(){let[e,t]=(0,a.useState)([]),[s,d]=(0,a.useState)([]),[o,D]=(0,a.useState)([]),[G,B]=(0,a.useState)(""),[P,U]=(0,a.useState)("all"),[z,Q]=(0,a.useState)("all"),[V,F]=(0,a.useState)("all"),[J,M]=(0,a.useState)(!0);(0,a.useEffect)(()=>{$()},[]),(0,a.useEffect)(()=>{q()},[e,G,P,z,V]);let $=async()=>{try{M(!0);let e=K.s.getAllLocalRegistrations(),s=K.s.getOfflineScreenings().map(e=>e.data);if("undefined"!=typeof navigator&&navigator.onLine)try{let[r,a]=await Promise.all([fetch("/api/registrations"),fetch("/api/screenings")]);if(r.ok&&a.ok){let n=await r.json(),l=await a.json();t([...e,...n]),d([...s,...l])}else t(e),d(s)}catch(r){console.log("Using offline data"),t(e),d(s)}else t(e),d(s)}catch(e){console.error("Error loading data:",e),t([]),d([])}finally{M(!1)}},q=()=>{let t=e;G&&(t=t.filter(e=>e.child_name.toLowerCase().includes(G.toLowerCase())||e.guardian_name.toLowerCase().includes(G.toLowerCase())||e.serial_no.toLowerCase().includes(G.toLowerCase()))),"all"!==P&&(t=t.filter(e=>e.gender===P)),"all"!==V&&(t=t.filter(e=>e.district===V)),"all"!==z&&(t=t.filter(e=>e.child_reaction===z)),D(t)},H=(()=>{let t=e.length,r=s.length,a=e.filter(e=>"male"===e.gender).length,n=e.filter(e=>"female"===e.gender).length,l=s.filter(e=>"normal"===e.child_reaction).length,i=s.filter(e=>"adverse"===e.child_reaction).length;return{total:t,totalScreenings:r,maleCount:a,femaleCount:n,normalReactions:l,adverseReactions:i,ageGroups:{"6-12 महिना":e.filter(e=>"1"===e.dose_amount||"2"===e.dose_amount).length,"1-2 वर्ष":e.filter(e=>"3"===e.dose_amount||"4"===e.dose_amount).length,"2-5 वर्ष":e.filter(e=>Number.parseInt(e.dose_amount)>=4).length},districtStats:e.reduce((e,t)=>(e[t.district]=(e[t.district]||0)+1,e),{}),monthlyData:e.reduce((e,t)=>{let s=new Date(t.date).toLocaleDateString("ne-NP",{year:"numeric",month:"short"});return e[s]=(e[s]||0)+1,e},{})}})(),W=[{name:"पुरुष",value:H.maleCount,color:"#3B82F6"},{name:"महिला",value:H.femaleCount,color:"#EC4899"}],X=Object.entries(H.ageGroups).map(e=>{let[t,s]=e;return{name:t,value:s}}),ee=[{name:"सामान्य",value:H.normalReactions,color:"#10B981"},{name:"प्रतिक्रिया",value:H.adverseReactions,color:"#EF4444"}],et=Object.entries(H.districtStats).sort((e,t)=>{let[,s]=e,[,r]=t;return r-s}).slice(0,10).map(e=>{let[t,s]=e;return{name:t,value:s}}),es=Object.entries(H.monthlyData).map(e=>{let[t,s]=e;return{name:t,registrations:s}}),er=[...new Set(e.map(e=>e.district))].filter(Boolean);return J?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)(n.Zb,{className:"w-96",children:(0,r.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"डाटा लोड गर्दै..."})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"रिपोर्ट र विश्लेषण"}),(0,r.jsx)("p",{className:"text-gray-600",children:"स्वर्णबिन्दु प्राशन कार्यक्रम डाटा विश्लेषण"})]}),(0,r.jsx)(T.default,{href:"/",children:(0,r.jsx)(l.z,{variant:"outline",children:"फिर्ता"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,r.jsx)(n.Zb,{className:"border-blue-200 bg-blue-50",children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(E.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"कुल दर्ता"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:H.total})]})]})})}),(0,r.jsx)(n.Zb,{className:"border-purple-200 bg-purple-50",children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(I.Z,{className:"h-8 w-8 text-purple-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"कुल स्क्रिनिङ"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:H.totalScreenings})]})]})})}),(0,r.jsx)(n.Zb,{className:"border-green-200 bg-green-50",children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(Y.Z,{className:"h-8 w-8 text-green-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600",children:"सामान्य प्रतिक्रिया"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:H.normalReactions})]})]})})}),(0,r.jsx)(n.Zb,{className:"border-red-200 bg-red-50",children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(k.Z,{className:"h-8 w-8 text-red-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-600",children:"प्रतिकूल प्रतिक्रिया"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-900",children:H.adverseReactions})]})]})})}),(0,r.jsx)(n.Zb,{className:"border-amber-200 bg-amber-50",children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(A.Z,{className:"h-8 w-8 text-amber-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-amber-600",children:"सफलता दर"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-amber-900",children:[H.totalScreenings>0?Math.round(H.normalReactions/H.totalScreenings*100):0,"%"]})]})]})})})]})]}),(0,r.jsxs)(x,{defaultValue:"overview",className:"space-y-6",children:[(0,r.jsxs)(h,{className:"grid w-full grid-cols-5",children:[(0,r.jsx)(u,{value:"overview",children:"सिंहावलोकन"}),(0,r.jsx)(u,{value:"registrations",children:"दर्ता सूची"}),(0,r.jsx)(u,{value:"screenings",children:"स्क्रिनिङ लग"}),(0,r.jsx)(u,{value:"analytics",children:"विश्लेषण"}),(0,r.jsx)(u,{value:"trends",children:"प्रवृत्ति"})]}),(0,r.jsx)(m,{value:"overview",className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"लिङ्ग वितरण"})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(p.u,{children:[(0,r.jsx)(b.b,{data:W,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:W.map((e,t)=>(0,r.jsx)(v.b,{fill:e.color},"cell-".concat(t)))}),(0,r.jsx)(N.u,{})]})})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"उमेर समूह वितरण"})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(y.v,{data:X,children:[(0,r.jsx)(S.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"name"}),(0,r.jsx)(_.Q,{}),(0,r.jsx)(N.u,{}),(0,r.jsx)(R.$,{dataKey:"value",fill:"#3B82F6"})]})})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"जिल्ला अनुसार वितरण"})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(y.v,{data:et,children:[(0,r.jsx)(S.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"name"}),(0,r.jsx)(_.Q,{}),(0,r.jsx)(N.u,{}),(0,r.jsx)(R.$,{dataKey:"value",fill:"#10B981"})]})})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"प्रतिक्रिया विश्लेषण"})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(p.u,{children:[(0,r.jsx)(b.b,{data:ee,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:ee.map((e,t)=>(0,r.jsx)(v.b,{fill:e.color},"cell-".concat(t)))}),(0,r.jsx)(N.u,{})]})})})]})]})}),(0,r.jsxs)(m,{value:"registrations",className:"space-y-6",children:[(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(Z.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(i.I,{placeholder:"नाम, अभिभावक वा सिरियल नम्बरले खोज्नुहोस्...",value:G,onChange:e=>B(e.target.value),className:"pl-10"})]})}),(0,r.jsxs)(c.Ph,{value:P,onValueChange:U,children:[(0,r.jsx)(c.i4,{children:(0,r.jsx)(c.ki,{placeholder:"लिङ्ग छान्नुहोस्"})}),(0,r.jsxs)(c.Bw,{children:[(0,r.jsx)(c.Ql,{value:"all",children:"सबै लिङ्ग"}),(0,r.jsx)(c.Ql,{value:"male",children:"पुरुष"}),(0,r.jsx)(c.Ql,{value:"female",children:"महिला"})]})]}),(0,r.jsxs)(c.Ph,{value:V,onValueChange:F,children:[(0,r.jsx)(c.i4,{children:(0,r.jsx)(c.ki,{placeholder:"जिल्ला छान्नुहोस्"})}),(0,r.jsxs)(c.Bw,{children:[(0,r.jsx)(c.Ql,{value:"all",children:"सबै जिल्ला"}),er.map(e=>(0,r.jsx)(c.Ql,{value:e,children:e},e))]})]}),(0,r.jsxs)(c.Ph,{value:z,onValueChange:Q,children:[(0,r.jsx)(c.i4,{children:(0,r.jsx)(c.ki,{placeholder:"प्रतिक्रिया छान्नुहोस्"})}),(0,r.jsxs)(c.Bw,{children:[(0,r.jsx)(c.Ql,{value:"all",children:"सबै प्रतिक्रिया"}),(0,r.jsx)(c.Ql,{value:"normal",children:"सामान्य"}),(0,r.jsx)(c.Ql,{value:"adverse",children:"प्रतिकूल"})]})]}),(0,r.jsxs)(l.z,{onClick:()=>{let e=new Blob([["सिरियल नम्बर,बालकको नाम,जन्म मिति,उमेर,लिङ्ग,अभिभावक,सम्पर्क,जिल्ला,पालिका,वडा,मात्रा,समय,सेवन गराउने,प्रतिक्रिया,तौल,खोप स्थिति,दर्ता मिति",...o.map(e=>[e.serial_no,e.child_name,e.birth_date,e.age,"male"===e.gender?"पुरुष":"महिला",e.guardian_name,e.contact_number,e.district,e.palika,e.ward,"".concat(e.dose_amount," थोपा"),e.dose_time,e.administered_by,"normal"===e.child_reaction?"सामान्य":"प्रतिक्रिया","".concat(e.weight," कि.ग्रा."),e.vaccination_status,e.date].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(e);t.setAttribute("href",s),t.setAttribute("download","swarnabindu-report-".concat(new Date().toISOString().split("T")[0],".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"w-full",children:[(0,r.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),"CSV निर्यात"]})]})})}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{children:["दर्ता सूची (",o.length,")"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(g.iA,{children:[(0,r.jsx)(g.xD,{children:(0,r.jsxs)(g.SC,{children:[(0,r.jsx)(g.ss,{children:"सिरियल नम्बर"}),(0,r.jsx)(g.ss,{children:"बालकको नाम"}),(0,r.jsx)(g.ss,{children:"उमेर"}),(0,r.jsx)(g.ss,{children:"लिङ्ग"}),(0,r.jsx)(g.ss,{children:"अभिभावक"}),(0,r.jsx)(g.ss,{children:"जिल्ला"}),(0,r.jsx)(g.ss,{children:"सम्पर्क"}),(0,r.jsx)(g.ss,{children:"तौल"}),(0,r.jsx)(g.ss,{children:"दर्ता मिति"}),(0,r.jsx)(g.ss,{children:"स्थिति"})]})}),(0,r.jsx)(g.RM,{children:o.map(e=>(0,r.jsxs)(g.SC,{children:[(0,r.jsx)(g.pj,{className:"font-medium",children:e.serial_no}),(0,r.jsx)(g.pj,{children:e.child_name}),(0,r.jsx)(g.pj,{children:e.age}),(0,r.jsx)(g.pj,{children:(0,r.jsx)(f.C,{variant:"outline",children:"male"===e.gender?"पुरुष":"महिला"})}),(0,r.jsx)(g.pj,{children:e.guardian_name}),(0,r.jsx)(g.pj,{children:e.district}),(0,r.jsx)(g.pj,{children:e.contact_number}),(0,r.jsxs)(g.pj,{children:[e.weight," कि.ग्रा."]}),(0,r.jsx)(g.pj,{children:e.date}),(0,r.jsx)(g.pj,{children:(0,r.jsx)(f.C,{variant:"normal"===e.child_reaction?"default":"destructive",children:"normal"===e.child_reaction?"सामान्य":"प्रतिक्रिया"})})]},e.id))})]})})})]})]}),(0,r.jsx)(m,{value:"screenings",className:"space-y-6",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(I.Z,{className:"h-5 w-5"}),"स्वर्णप्राशन स्क्रिनिङ लग"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(g.iA,{children:[(0,r.jsx)(g.xD,{children:(0,r.jsxs)(g.SC,{children:[(0,r.jsx)(g.ss,{children:"क्र.सं."}),(0,r.jsx)(g.ss,{children:"मिति"}),(0,r.jsx)(g.ss,{children:"बिरामी ID"}),(0,r.jsx)(g.ss,{children:"मात्रा"}),(0,r.jsx)(g.ss,{children:"सेवन गराउने"}),(0,r.jsx)(g.ss,{children:"प्रतिक्रिया"}),(0,r.jsx)(g.ss,{children:"ब्याच नम्बर"}),(0,r.jsx)(g.ss,{children:"टिप्पणी"})]})}),(0,r.jsx)(g.RM,{children:s.map((e,t)=>(0,r.jsxs)(g.SC,{children:[(0,r.jsx)(g.pj,{children:t+1}),(0,r.jsx)(g.pj,{children:new Date(e.screening_date).toLocaleDateString("ne-NP")}),(0,r.jsx)(g.pj,{className:"font-mono text-xs",children:e.patient_id}),(0,r.jsx)(g.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Number.parseInt(e.dose_amount)||1},(e,t)=>(0,r.jsx)("div",{className:"w-2 h-2 bg-amber-400 rounded-full"},t))}),(0,r.jsxs)("span",{className:"text-sm",children:[e.dose_amount," थोपा"]})]})}),(0,r.jsx)(g.pj,{className:"text-sm",children:e.administered_by}),(0,r.jsx)(g.pj,{children:(0,r.jsx)(f.C,{variant:"normal"===e.child_reaction?"default":"destructive",children:"normal"===e.child_reaction?"सामान्य":"प्रतिक्रिया"})}),(0,r.jsx)(g.pj,{className:"font-mono text-xs",children:e.batch_number}),(0,r.jsx)(g.pj,{className:"text-xs max-w-32 truncate",children:e.notes||"-"})]},e.id))})]})})})]})}),(0,r.jsxs)(m,{value:"analytics",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"सफलता दर विश्लेषण"})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-800",children:"सामान्य प्रतिक्रिया"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:H.normalReactions})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm text-green-600",children:[H.totalScreenings>0?(H.normalReactions/H.totalScreenings*100).toFixed(1):0,"%"]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-800",children:"प्रतिकूल प्रतिक्रिया"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-900",children:H.adverseReactions})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm text-red-600",children:[H.totalScreenings>0?(H.adverseReactions/H.totalScreenings*100).toFixed(1):0,"%"]})})]})]})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"उमेर समूह अनुसार प्रदर्शन"})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(y.v,{data:X,children:[(0,r.jsx)(S.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"name"}),(0,r.jsx)(_.Q,{}),(0,r.jsx)(N.u,{}),(0,r.jsx)(R.$,{dataKey:"value",fill:"#8B5CF6"})]})})})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"सारांश तथ्याङ्क"})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:H.total}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"कुल दर्ता संख्या"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:H.totalScreenings}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"कुल स्क्रिनिङ"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[H.totalScreenings>0?Math.round(H.normalReactions/H.totalScreenings*100):0,"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"सफलता दर"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-red-600",children:[H.totalScreenings>0?Math.round(H.adverseReactions/H.totalScreenings*100):0,"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"प्रतिकूल प्रतिक्रिया दर"})]})]})})]})]}),(0,r.jsxs)(m,{value:"trends",className:"space-y-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"मासिक दर्ता प्रवृत्ति"})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(j.h,{width:"100%",height:400,children:(0,r.jsxs)(O.w,{data:es,children:[(0,r.jsx)(S.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"name"}),(0,r.jsx)(_.Q,{}),(0,r.jsx)(N.u,{}),(0,r.jsx)(C.x,{type:"monotone",dataKey:"registrations",stroke:"#3B82F6",strokeWidth:2})]})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{className:"text-center",children:"दैनिक औसत"})}),(0,r.jsxs)(n.aY,{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:H.total>0?Math.round(H.total/30):0}),(0,r.jsx)("p",{className:"text-gray-600",children:"दर्ता प्रति दिन"})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{className:"text-center",children:"स्क्रिनिङ दर"})}),(0,r.jsxs)(n.aY,{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:H.total>0?(H.totalScreenings/H.total).toFixed(1):0}),(0,r.jsx)("p",{className:"text-gray-600",children:"प्रति बिरामी"})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{className:"text-center",children:"कभरेज"})}),(0,r.jsxs)(n.aY,{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-green-600 mb-2",children:er.length}),(0,r.jsx)("p",{className:"text-gray-600",children:"जिल्लाहरू"})]})]})]})]})]})]})})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(57437);s(2265);var a=s(90535),n=s(94508);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},62869:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(57437),a=s(2265),n=s(37053),l=s(90535),i=s(94508);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...o}=e,x=d?n.g7:"button";return(0,r.jsx)(x,{className:(0,i.cn)(c({variant:a,size:l,className:s})),ref:t,...o})});d.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var r=s(57437),a=s(2265),n=s(94508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var r=s(57437),a=s(2265),n=s(94508);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},53647:function(e,t,s){"use strict";s.d(t,{Bw:function(){return f},Ph:function(){return o},Ql:function(){return g},i4:function(){return h},ki:function(){return x}});var r=s(57437),a=s(2265),n=s(5056),l=s(40875),i=s(22135),c=s(30401),d=s(94508);let o=n.fC;n.ZA;let x=n.B4,h=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[a,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=n.xz.displayName;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});u.displayName=n.u_.displayName;let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=n.$G.displayName;let f=a.forwardRef((e,t)=>{let{className:s,children:a,position:l="popper",...i}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,r.jsx)(u,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(m,{})]})})});f.displayName=n.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=n.__.displayName;let g=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:a})]})});g.displayName=n.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=n.Z0.displayName},73578:function(e,t,s){"use strict";s.d(t,{RM:function(){return c},SC:function(){return d},iA:function(){return l},pj:function(){return x},ss:function(){return o},xD:function(){return i}});var r=s(57437),a=s(2265),n=s(94508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...a})})});l.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...a})});i.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});d.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});o.displayName="TableHead";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});x.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},42224:function(e,t,s){"use strict";s.d(t,{s:function(){return r}});class r{static isLocalStorageAvailable(){try{if(!window.localStorage)return!1;let e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}static saveRegistration(e){if(!this.isLocalStorageAvailable())throw console.warn("localStorage not available"),Error("Local storage not available");try{let t="reg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s={id:t,data:e,timestamp:new Date().toISOString(),synced:!1},r=this.getOfflineRegistrations();return r.push(s),localStorage.setItem(this.REGISTRATION_KEY,JSON.stringify(r)),t}catch(e){throw console.error("Error saving registration to offline storage:",e),e}}static getOfflineRegistrations(){if(!this.isLocalStorageAvailable())return[];try{let e=localStorage.getItem(this.REGISTRATION_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading offline registrations:",e),[]}}static getAllLocalRegistrations(){return this.getOfflineRegistrations().map(e=>({id:e.id,localId:e.id,...e.data,created_at:e.timestamp,synced:e.synced}))}static getUnsyncedRegistrations(){return this.getOfflineRegistrations().filter(e=>!e.synced)}static getPendingRegistrations(){return this.getUnsyncedRegistrations()}static markRegistrationSynced(e,t){if(this.isLocalStorageAvailable())try{let s=this.getOfflineRegistrations(),r=s.find(t=>t.id===e);r&&(r.synced=!0,r.syncedAt=new Date().toISOString(),t&&(r.data.server_id=t),localStorage.setItem(this.REGISTRATION_KEY,JSON.stringify(s)))}catch(e){console.error("Error marking registration as synced:",e)}}static saveScreening(e){if(!this.isLocalStorageAvailable())throw console.warn("localStorage not available"),Error("Local storage not available");try{let t="scr_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s={id:t,data:e,timestamp:new Date().toISOString(),synced:!1},r=this.getOfflineScreenings();return r.push(s),localStorage.setItem(this.SCREENING_KEY,JSON.stringify(r)),t}catch(e){throw console.error("Error saving screening to offline storage:",e),e}}static getOfflineScreenings(){if(!this.isLocalStorageAvailable())return[];try{let e=localStorage.getItem(this.SCREENING_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading offline screenings:",e),[]}}static getUnsyncedScreenings(){return this.getOfflineScreenings().filter(e=>!e.synced)}static getPendingScreenings(){return this.getUnsyncedScreenings()}static markScreeningSynced(e,t){if(this.isLocalStorageAvailable())try{let s=this.getOfflineScreenings(),r=s.find(t=>t.id===e);r&&(r.synced=!0,r.syncedAt=new Date().toISOString(),t&&(r.data.server_id=t),localStorage.setItem(this.SCREENING_KEY,JSON.stringify(s)))}catch(e){console.error("Error marking screening as synced:",e)}}static setSyncStatus(e){if(this.isLocalStorageAvailable())try{localStorage.setItem(this.SYNC_STATUS_KEY,JSON.stringify(e))}catch(e){console.error("Error setting sync status:",e)}}static getSyncStatus(){if(!this.isLocalStorageAvailable())return{isOnline:"undefined"==typeof navigator||navigator.onLine,pendingCount:0};try{let e=localStorage.getItem(this.SYNC_STATUS_KEY);return e?JSON.parse(e):{isOnline:"undefined"==typeof navigator||navigator.onLine,pendingCount:0}}catch(e){return{isOnline:"undefined"==typeof navigator||navigator.onLine,pendingCount:0}}}static getPendingSyncCount(){return this.getUnsyncedRegistrations().length+this.getUnsyncedScreenings().length}static getPendingCount(){return this.getPendingSyncCount()}static clearSyncedData(){if(this.isLocalStorageAvailable())try{let e=this.getOfflineRegistrations().filter(e=>!e.synced),t=this.getOfflineScreenings().filter(e=>!e.synced);localStorage.setItem(this.REGISTRATION_KEY,JSON.stringify(e)),localStorage.setItem(this.SCREENING_KEY,JSON.stringify(t))}catch(e){console.error("Error clearing synced data:",e)}}static clearAll(){this.clearAllData()}static clearAllData(){if(this.isLocalStorageAvailable())try{localStorage.removeItem(this.REGISTRATION_KEY),localStorage.removeItem(this.SCREENING_KEY),localStorage.removeItem(this.SYNC_STATUS_KEY)}catch(e){console.error("Error clearing all offline data:",e)}}static isOnline(){return"undefined"==typeof navigator||navigator.onLine}static async autoSync(){if(!this.isOnline()){console.log("Offline - skipping auto sync");return}let e=this.getUnsyncedRegistrations(),t=this.getUnsyncedScreenings();if(0===e.length&&0===t.length){console.log("No pending items to sync");return}try{console.log("Syncing ".concat(e.length," registrations and ").concat(t.length," screenings"));let s=await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({registrations:e.map(e=>e.data),screenings:t.map(e=>e.data)})}),r=await s.json();r.success?(e.forEach(e=>this.markRegistrationSynced(e.id)),t.forEach(e=>this.markScreeningSynced(e.id)),this.setSyncStatus({lastSync:new Date().toISOString(),isOnline:!0,pendingCount:0}),console.log("Auto-sync completed successfully")):console.error("Auto-sync failed:",r.message)}catch(e){console.error("Auto-sync error:",e)}}}r.REGISTRATION_KEY="swarnabindu_registrations",r.SCREENING_KEY="swarnabindu_screenings",r.SYNC_STATUS_KEY="swarnabindu_sync_status",window.addEventListener("online",()=>{console.log("Back online - attempting auto-sync"),r.setSyncStatus({isOnline:!0,pendingCount:r.getPendingSyncCount()}),r.autoSync()}),window.addEventListener("offline",()=>{console.log("Gone offline - data will be stored locally"),r.setSyncStatus({isOnline:!1,pendingCount:r.getPendingSyncCount()})}),r.isOnline()&&setTimeout(()=>{r.autoSync()},2e3)},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[688,424,644,971,117,744],function(){return e(e.s=77611)}),_N_E=e.O()}]);